{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "StrykerMonoSchema",
  "description": "Options for Stryker for JS and TypeScript and all officially supported plugins.",
  "type": "object",
  "properties": {
    "allowConsoleColors": {
      "description": "The 'allowConsoleColors' value indicates whether Stryker should use colors in console.",
      "type": "boolean",
      "default": true
    },
    "buildCommand": {
      "type": "string",
      "description": "Configure a build command to run after mutating the code, but before mutants are tested. This is generally used to transpile your code before testing. Only configure this if your test runner doesn't take care of this already and you're not using just-in-time transpiler like `babel/register` or `ts-node`.",
      "examples": [
        "tsc -b",
        "babel src --out-dir lib",
        "npm run build"
      ]
    },
    "checkers": {
      "description": "Enable checker plugins here. A checker plugin will be invoked for each mutant before it is run in a test runner. It can check to see of a given mutant is valid, by for example validate that it won't result in a type error",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "concurrency": {
      "description": "Set the concurrency of workers. Stryker will always run checkers and test runners in parallel by creating worker processes (note, not `worker_threads`). This defaults to `n-1` where `n` is the number of logical CPU cores available on your machine, unless `n <= 4`, in that case it uses `n`. This is a sane default for most use cases.",
      "type": "number"
    },
    "maxTestRunnerReuse": {
      "description": "Restart each forked threads after <n> runs. Not recommended unless you are experiencing memory leaks that you are unable to resolve. (default: 0)",
      "type": "number",
      "default": 0
    },
    "commandRunner": {
      "description": "Options used by the command test runner. Note: these options will only be used when the command test runner is activated (this is the default)",
      "$ref": "#/definitions/commandRunnerOptions",
      "default": {}
    },
    "coverageAnalysis": {
      "$ref": "#/definitions/coverageAnalysis",
      "description": "Indicates which coverage analysis strategy to use. During mutation testing, stryker will try to only run the tests that cover a particular line of code.\n\n'perTest': Analyse coverage per test.\n'all': Analyse the coverage for the entire test suite.\n'off' (default): Don't use coverage analysis",
      "default": "off"
    },
    "clearTextReporter": {
      "description": "The options for the clear text reporter.",
      "$ref": "#/definitions/clearTextReporterOptions",
      "default": {}
    },
    "dashboard": {
      "description": "The options for the dashboard reporter.",
      "$ref": "#/definitions/dashboardOptions",
      "default": {}
    },
    "eventReporter": {
      "description": "The options for the event recorder reporter.",
      "$ref": "#/definitions/eventRecorderOptions",
      "default": {}
    },
    "fileLogLevel": {
      "description": "Set the log level that Stryker uses to write to the \"stryker.log\" file",
      "$ref": "#/definitions/logLevel",
      "default": "off"
    },
    "files": {
      "description": "With `files` you can choose which files should be included in your test runner sandbox.\nThis is normally not needed as it defaults to all files not ignored by git.\nTry it out yourself with this command: `git ls-files --others --exclude-standard --cached --exclude .stryker-tmp`.\n\nIf you do need to override `files` (for example: when your project does not live in a git repository),\nyou can override the files here.\n\nWhen using the command line, the list can only contain a comma separated list of globbing expressions.\nWhen using the config file you can provide an array with `string`s",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "logLevel": {
      "description": "Set the log level that Stryker uses to write to the console.",
      "$ref": "#/definitions/logLevel",
      "default": "info"
    },
    "maxConcurrentTestRunners": {
      "description": "[DEPRECATED please use \"concurrency\" instead]. Specifies the maximum number of concurrent test runners to spawn. Mutation testing is time consuming. By default, Stryker tries to make the most of your CPU's, by spawning as many test runners as you have CPU cores (`Number.MAX_SAFE_INTEGER`).",
      "type": "number",
      "default": 9007199254740991
    },
    "mutate": {
      "description": "With mutate you configure the subset of files to use for mutation testing. Generally speaking, these should be your own source files.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "{src,lib}/**/!(*.+(s|S)pec|*.+(t|T)est).+(cjs|mjs|js|ts|jsx|tsx|html|vue)",
        "!{src,lib}/**/__tests__/**/*.+(cjs|mjs|js|ts|jsx|tsx|html|vue)"
      ]
    },
    "mutator": {
      "description": "Configure how Stryker mutates your code.",
      "$ref": "#/definitions/mutatorDescriptor",
      "default": {}
    },
    "packageManager": {
      "enum": [
        "npm",
        "yarn"
      ],
      "description": "The package manager Stryker can use to install missing dependencies."
    },
    "plugins": {
      "description": "With 'plugins', you can add additional Node modules for Stryker to load (or require). By default, all node_modules starting with @stryker-mutator/* will be loaded, so you would normally not need to specify this option. These modules should be installed right next to stryker. For a current list of plugins, you can consult 'npm' or 'stryker-mutator.io.'",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "@stryker-mutator/*"
      ]
    },
    "appendPlugins": {
      "description": "A list of additional plugins you want Stryker to load (`require`) without overwriting the (default) `plugins`.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "reporters": {
      "description": "With reporters, you can set the reporters for stryker to use.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "clear-text",
        "progress",
        "html"
      ]
    },
    "htmlReporter": {
      "description": "The options for the html reporter",
      "$ref": "#/definitions/htmlReporterOptions"
    },
    "disableTypeChecks": {
      "description": "Configure a pattern that matches the files of which type checking has to be disabled. This is needed because Stryker will create (typescript) type errors when inserting the mutants in your code. Stryker disables type checking by inserting `// @ts-nocheck` atop those files and removing other `// @ts-xxx` directives (so they won't interfere with `@ts-nocheck`). The default setting allows these directives to be stripped from all JavaScript and friend files in `lib`, `src` and `test` directories. You can specify a different glob expression or set it to `false` to completely disable this behavior.",
      "anyOf": [
        {
          "enum": [
            false
          ]
        },
        {
          "type": "string"
        }
      ],
      "default": "{test,src,lib}/**/*.{js,ts,jsx,tsx,html,vue}"
    },
    "symlinkNodeModules": {
      "description": "The 'symlinkNodeModules' value indicates whether Stryker should create a symbolic link to your current node_modules directory in the sandbox directories. This makes running your tests by Stryker behave more like your would run the tests yourself in your project directory. Only disable this setting if you really know what you are doing.",
      "type": "boolean",
      "default": true
    },
    "tempDirName": {
      "description": "Choose a different temp dir that Stryker uses for mutation testing. This directory will contain copies of your source code during a mutation test run. It will be created if it not exists and is *entirely deleted* after a successful run, so change this with caution.",
      "type": "string",
      "default": ".stryker-tmp"
    },
    "cleanTempDir": {
      "description": "Choose whether or not to clean the temp dir (which is \".stryker-tmp\" inside the current working directory by default) after a successful run. The temp dir will never be removed when the run failed for some reason (for debugging purposes)",
      "type": "boolean",
      "default": true
    },
    "testRunner": {
      "description": "With 'testRunner' you specify the test runner that Stryker uses to run your tests. The default value is command. The command runner runs a configurable bash/cmd command and bases the result on the exit code of that program (0 for success, otherwise failed). You can configure this command via the config file using the 'commandRunner: { command: 'npm run mocha' }'. It uses 'npm test' as the command by default.",
      "type": "string",
      "default": "command"
    },
    "thresholds": {
      "description": "Specify the thresholds for mutation score.",
      "$ref": "#/definitions/mutationScoreThresholds",
      "default": {}
    },
    "timeoutFactor": {
      "description": "Configure the allowed timeout deviation relative to the time of a normal test run. Tweak this if you notice that mutants are prone to creating slower code, but not infinite loops (for that, use `timeoutMS`)",
      "type": "number",
      "default": 1.5
    },
    "timeoutMS": {
      "description": "Configure an absolute timeout deviation. Tweak this if you run Stryker on a busy machine and you need to wait longer to make sure that the code indeed entered an infinite loop.",
      "type": "number",
      "default": 5000
    },
    "tsconfigFile": {
      "description": "Configure the (root) tsconfig file for typescript projects. This will allow Stryker to rewrite the `extends` and `references` settings in this and related tsconfig files in your sandbox. Defaults to `tsconfig.json`. This setting is also used when you enable the `@stryker-mutator/typescript-checker plugin",
      "type": "string",
      "default": "tsconfig.json"
    },
    "warnings": {
      "default": true,
      "oneOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/definitions/warningOptions"
        }
      ],
      "description": "Enable or disable certain warnings"
    },
    "jasmineConfigFile": {
      "description": "Specify your [jasmine configuration file](https://jasmine.github.io/setup/nodejs.html#configuration) to be loaded. Leaving this blank will result in the jasmine defaults, which are undocumented (see [source code here](https://github.com/jasmine/jasmine-npm/blob/master/lib/jasmine.js#L10-L38)).",
      "type": "string"
    },
    "jest": {
      "title": "JestOptions",
      "description": "Configuration for @stryker-mutator/jest-runner",
      "type": "object",
      "default": {},
      "properties": {
        "projectType": {
          "$ref": "#/definitions/jestProjectType",
          "default": "custom"
        },
        "configFile": {
          "description": "Path to your Jest config file. Please leave it empty if you want jest configuration to be loaded from package.json or a standard jest configuration file.",
          "type": "string"
        },
        "config": {
          "description": "A custom Jest configuration object. You could also use `require` to load it here.",
          "type": "object"
        },
        "enableFindRelatedTests": {
          "description": "Whether to run jest with the `--findRelatedTests` flag. When `true`, Jest will only run tests related to the mutated file per test. (See [_--findRelatedTests_](https://jestjs.io/docs/en/cli.html#findrelatedtests-spaceseparatedlistofsourcefiles)",
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "karma": {
      "description": "Configuration for @stryker-mutator/karma-runner",
      "title": "StrykerKarmaSetup",
      "additionalProperties": false,
      "type": "object",
      "default": {},
      "properties": {
        "projectType": {
          "$ref": "#/definitions/karmaProjectKind",
          "default": "custom"
        },
        "configFile": {
          "description": "Specify a ['karma.conf.js' file](http://karma-runner.github.io/2.0/config/configuration-file.html) to be loaded. Options specified directly in your stryker.conf.js file using `karma.config` will overrule options in your karma.conf.js file.",
          "type": "string"
        },
        "config": {
          "description": "Specify [karma configuration options](http://karma-runner.github.io/2.0/config/configuration-file.html) directly. Options specified here will overrule any options in your karma.conf.js file.",
          "type": "object"
        },
        "ngConfig": {
          "$ref": "#/definitions/karmaNgConfigOptions"
        }
      }
    },
    "mochaOptions": {
      "title": "MochaOptions",
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for @stryker-mutator/mocha-runner",
      "default": {},
      "properties": {
        "require": {
          "description": "Set mocha's [`require` option](https://mochajs.org/#-r---require-module-name)",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "ignore": {
          "description": "Set mocha's [`ignore option](https://github.com/mochajs/mocha/blob/master/example/config/.mocharc.yml#L26)",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "file": {
          "description": "Set mocha's [`file options`](https://mochajs.org/#-file-filedirectoryglob)",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "opts": {
          "description": "Specify a ['mocha.opts' file](https://mochajs.org/#mochaopts) to be loaded. Options specified directly in your stryker.conf.js file will overrule options from the 'mocha.opts' file. Disable loading of an additional mocha.opts file with `false`. The only supported mocha options are used: `--ui`, `--require`, `--async-only`, `--timeout`, `--grep` (or their short form counterparts). Others are ignored by the @stryker-mutator/mocha-runner.",
          "type": "string"
        },
        "config": {
          "description": "Explicit path to the [mocha config file](https://mochajs.org/#-config-path)",
          "type": "string"
        },
        "package": {
          "description": "Specify an explicit path to a package.json file (ostensibly containing configuration in a mocha property). See https://mochajs.org/#-package-path.",
          "type": "string"
        },
        "no-package": {
          "type": "boolean",
          "description": "Explicit turn off [mocha package file](https://mochajs.org/#-package-path)"
        },
        "no-opts": {
          "type": "boolean",
          "description": "Explicit turn off [mocha opts file](https://mochajs.org/#-opts-path)"
        },
        "no-config": {
          "type": "boolean",
          "description": "Explicit turn off [mocha config file](https://mochajs.org/#-config-path)"
        },
        "async-only": {
          "description": "Set mocha's [`async-only` option](https://mochajs.org/#-async-only-a)",
          "type": "boolean"
        },
        "ui": {
          "description": "Set the name of your [mocha ui](https://mochajs.org/#-u---ui-name)",
          "type": "string",
          "enum": [
            "bdd",
            "tdd",
            "qunit",
            "exports"
          ]
        },
        "files": {
          "description": "DEPRECATED, use `spec` instead.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ]
        },
        "spec": {
          "description": "Choose which files to include. This is comparable to [mocha's test directory](https://mochajs.org/#the-test-directory) although there is no support for `--recursive`.\n\nIf you want to load all files recursively: use a globbing expression (`'test/**/*.js'`). If you want to decide on the order of files, use multiple globbing expressions. For example: use `['test/helpers/**/*.js', 'test/unit/**/*.js']` if you want to make sure your helpers are loaded before your unit tests.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "grep": {
          "description": "Specify a mocha [`grep`](https://mochajs.org/#grep) command, to single out individual tests.",
          "type": "string"
        },
        "extension": {
          "description": "Specify mocha [--extension](https://mochajs.org/#-extension-ext) property.",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "definitions": {
    "commandRunnerOptions": {
      "title": "CommandRunnerOptions",
      "type": "object",
      "properties": {
        "command": {
          "description": "The command to test each mutant. For example \"npm run mocha\". Defaults to \"npm test\".",
          "type": "string",
          "default": "npm test"
        }
      }
    },
    "logLevel": {
      "title": "LogLevel",
      "type": "string",
      "enum": [
        "off",
        "fatal",
        "error",
        "warn",
        "info",
        "debug",
        "trace"
      ],
      "tsEnumNames": [
        "Off",
        "Fatal",
        "Error",
        "Warning",
        "Information",
        "Debug",
        "Trace"
      ]
    },
    "coverageAnalysis": {
      "title": "CoverageAnalysis",
      "type": "string",
      "enum": [
        "off",
        "all",
        "perTest"
      ]
    },
    "reportType": {
      "title": "ReportType",
      "type": "string",
      "enum": [
        "full",
        "mutationScore"
      ],
      "tsEnumNames": [
        "Full",
        "MutationScore"
      ]
    },
    "clearTextReporterOptions": {
      "title": "ClearTextReporterOptions",
      "type": "object",
      "properties": {
        "allowColor": {
          "description": "Indicates whether or not to use color coding in output.",
          "type": "boolean",
          "default": true
        },
        "logTests": {
          "description": "Indicates whether or not to log which tests were executed for a given mutant.",
          "type": "boolean",
          "default": true
        },
        "maxTestsToLog": {
          "description": "Indicates the maximum amount of test to log when `logTests` is enabled",
          "type": "integer",
          "minimum": 0,
          "default": 3
        }
      }
    },
    "dashboardOptions": {
      "title": "DashboardOptions",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "project": {
          "description": "Indicates which project to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "version": {
          "description": "Indicates which version to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "module": {
          "description": "Indicates which module to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "baseUrl": {
          "description": "Indicates the base url of the stryker dashboard.",
          "type": "string",
          "default": "https://dashboard.stryker-mutator.io/api/reports"
        },
        "reportType": {
          "description": "Indicates wether to send a full report (inc. source code and mutant results) or only the mutation score.",
          "$ref": "#/definitions/reportType",
          "default": "full"
        }
      }
    },
    "eventRecorderOptions": {
      "title": "EventRecorderOptions",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "baseDir": {
          "description": "The base dir to write the events to",
          "type": "string",
          "default": "reports/mutation/events"
        }
      }
    },
    "htmlReporterOptions": {
      "title": "HtmlReporterOptions",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "baseDir": {
          "description": "The output folder for the html report.",
          "type": "string",
          "default": "reports/mutation/html"
        }
      }
    },
    "mutationScoreThresholds": {
      "title": "MutationScoreThresholds",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "high": {
          "$ref": "#/definitions/percentage",
          "default": 80
        },
        "low": {
          "$ref": "#/definitions/percentage",
          "default": 60
        },
        "break": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "$ref": "#/definitions/percentage"
            }
          ],
          "default": null
        }
      }
    },
    "percentage": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "mutatorDescriptor": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "plugins": {
          "description": "Override the default babel plugins Stryker uses to parse your JavaScript files. The default list of plugins is extensive and normally doesn't need overriding. Stryker also loads your babel plugins by default (if you have them). If Stryker's default babel plugins conflicts with your plugins, try to override this list with an empty array.",
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": [
                  "string",
                  "array"
                ]
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "excludedMutations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        }
      }
    },
    "warningOptions": {
      "title": "WarningOptions",
      "type": "object",
      "default": {},
      "properties": {
        "unknownOptions": {
          "description": "decide whether or not to log warnings when additional stryker options are configured",
          "type": "boolean",
          "default": true
        },
        "preprocessorErrors": {
          "description": "decide whether or not to log warnings when a preprocessor error occurs. For example, when the disabling of type errors fails.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "jestProjectType": {
      "description": "The type of project you are working on. \n* `custom` uses the `config` option. \n*`create-react-app` when you are using [create-react-app](https://github.com/facebook/create-react-app)\n* `create-react-app-ts` when you are using [create-react-app-typescript](https://github.com/wmonk/create-react-app-typescript)\n* `react`: DEPRECATED, please use `create-react-app`.",
      "enum": [
        "create-react-app",
        "create-react-app-ts",
        "custom"
      ]
    },
    "karmaProjectKind": {
      "title": "ProjectKind",
      "description": "Specify which kind of project you're using. This determines which command is used to start karma\n* `custom`: configure @stryker-mutator/karma-runner to use `karma start`\n* `angular-cli`: configure @stryker-mutator/karma-runner to use `ng test`",
      "enum": [
        "custom",
        "angular-cli"
      ]
    },
    "karmaNgConfigOptions": {
      "title": "NgConfigOptions",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "testArguments": {
          "description": "Add [ng test arguments](https://github.com/angular/angular-cli/wiki/test#options). For example, specify an alternative project with: `\"testArguments\": { \"project\": \"my-lib\" }",
          "title": "NgTestArguments",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    }
  }
}